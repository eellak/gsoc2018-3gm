{% extends 'layout.html' %}
{% block body %}


<h1>Ιστορικό του {{ identifier }}</h1>

<h3>Ευρετήριο</h3>

<ol>
  {% for law in history | reverse %}
  <li><a href="#heading{{ loop.index }}">
    {% if law.identifier == law.amendee %}
    Αρχική μορφή του {{ law.identifier }}
    {% else %}
    Εμφάνιση του {{ law.identifier }} μέχρι και τις αλλαγές του {{ law.amendee }}
    {% endif %}
  </a></li>

  {% endfor %}
</ol>

<h3>Πλήρες Ιστορικό</h3>

<div id="accordion">
  {% for law in history | reverse %}
  <div class="card">
    <div class="card-header" id="heading{{ loop.index }}">
      <h5 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" aria-expanded="false" data-target="#collapse{{ loop.index }}" aria-controls="collapse{{ loop.index }}">
          <h1>
            {% if law.identifier == law.amendee %}
            Αρχική μορφή του {{ law.identifier }}
            {% else %}
            Εμφάνιση του {{ law.identifier }} μέχρι και τις αλλαγές του {{ law.amendee }}
            {% endif %}
          </h1>
        </button>
      </h5>
    </div>

    <div id="collapse{{ loop.index }}" class="collapse" aria-labelledby="heading{{ loop.index }}" data-parent="#accordion">
      <div class="card-body">
        <h5>Κείμενο</h5>
        {{ law.content | render_md | safe }}

        <br>
        {% if law.amendee != law.identifier %}
        <h5>Σύνδεσμοι</h5>

        {% for text, tags in links.items() %}
        {% set tags = tags | listify %}
        {% if tags[0][1] == law.amendee %}
        <h5>Κείμενο Τροποποίησης</h5>
        <p>{{ text }}</p>

        <h5>Είδος Τροποποίησης </h5>
        {% for t in tags %}
        <p>{{ t | render_badges | safe }}</p>
        {% endfor %}


        <hr>

        {% endif %}
        {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>


  {% endfor %}
</div>


{% endblock %}
